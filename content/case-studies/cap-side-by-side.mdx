---
title: 'Side-by-Side Extension with CAP & Fiori'
summary: 'Building a scalable supplier portal on SAP BTP using Cloud Application Programming Model (CAP) and SAP HANA Cloud.'
tags: ['CAP', 'BTP', 'Node.js', 'Fiori', 'Side-by-Side']
period: '2023-2024'
role: 'Solution Architect & Dev Lead'
stack: ['CAP (Node.js)', 'SAP HANA Cloud', 'Fiori Elements', 'Event Mesh']
featured: true
metrics: ['< 200ms API Latency', 'Global Rollout (20+ countries)', '-40% TCO']
---

# Problem

## Business Challenge

Ein globaler Automotive-Zulieferer benötigte ein **Supplier Self-Service Portal** für 850+ Lieferanten weltweit. Lieferanten sollten Bestellungen einsehen, Lieferscheine hochladen und Qualitätszertifikate verwalten können - ohne VPN-Zugriff auf das interne SAP S/4HANA System.

## Technical Pain Points

- **Security Risk**: Direkter Internet-Zugriff auf S/4HANA nicht akzeptabel
- **Performance**: Existierendes SAP Gateway mit 850+ Usern an Performance-Grenzen
- **User Experience**: Legacy SAP GUI-Transaktionen nicht mobile-tauglich
- **Scalability**: Black Friday-ähnliche Lastspitzen (Monatsende) führten zu System-Slowdowns
- **Global Access**: Latenz-Probleme für Supplier in APAC-Region (800ms+)

## Business Impact

- **Manuelle Prozesse**: 40% der Lieferscheine kamen per Fax/Email → manuelle Erfassung
- **Verzögerungen**: Durchschnittlich 3 Tage vom Wareneingang bis zur Buchung
- **Kosten**: 15 FTE für manuelle Datenerfassung und Supplier-Support
- **Supplier Frustration**: NPS Score von 32 (poor) für Supplier-Interaktionen

# Solution

## Strategic Architecture Decision

Wir implementierten eine **Clean Core-konforme Side-by-Side Extension** auf SAP BTP anstatt einer direkten Gateway-Erweiterung.

### Architecture Overview

```
Internet
    ↓
[Cloud Foundry App]
    ├─ CAP Backend (Node.js)
    ├─ SAP HANA Cloud (Persistence)
    └─ Fiori Elements UI (OData v4)

    ↓ (via Cloud Connector)

S/4HANA (On-Premise)
    ├─ Purchase Orders (Read via CDS View)
    ├─ Goods Receipt (Post via BAPI)
    └─ Master Data Sync (Event-Driven)
```

## Key Technical Components

### CAP Backend (Node.js)

- **Business Logic**: Supplier-specific validations, multi-language support
- **Persistence**: SAP HANA Cloud für Supplier-spezifische Daten (Attachments, Comments)
- **Integration**: Cloud Connector zu S/4HANA für Echtzeit-Bestelldaten
- **Security**: SAP IAS mit Role-Based Access Control pro Supplier

### Data Strategy

- **Managed Associations**: Vereinfachte Datenmodellierung zwischen PO → Items → Attachments
- **CQRS Pattern**: Read Model (Fiori List Report) optimiert, Write Operations asynchron
- **Delta Replication**: Nur geänderte Bestellungen via Change Pointers
- **Attachment Service**: `@cap-js/attachments` mit Malware Scanning

### Frontend (Fiori Elements)

- **OData V4**: Moderne Fiori Elements (List Report / Object Page)
- **Mobile-First**: Responsive Design für Supplier-Zugriff via Smartphone
- **Offline-Fähig**: Progressive Web App für schlechte Netzwerkverbindungen

## Implementation Highlights

### Performance Optimierung

- **CDN**: CloudFlare für statische Assets (Europa + APAC)
- **Caching**: Redis für häufig abgerufene Master-Daten
- **Pagination**: Virtual Scrolling für große Bestelllisten
- **Lazy Loading**: On-Demand Laden von Attachments

### Security Layers

1. **Cloud Foundry Application Router**: First line of defense
2. **SAP IAS**: Multi-Tenant Identity Provider mit MFA
3. **Cloud Connector**: Reverse Invoke für On-Premise Access
4. **Principal Propagation**: End-to-End User Context zu S/4HANA

# Result

## Business Outcomes

- **40% TCO Reduktion**: Von 15 FTE auf 9 FTE für Supplier Support
- **NPS Score: 32 → 68**: Supplier-Zufriedenheit mehr als verdoppelt
- **Prozessgeschwindigkeit**: Lieferschein-Buchung von 3 Tagen auf < 4 Stunden
- **Global Rollout**: Erfolgreich in 20+ Ländern (EU, Americas, APAC) ausgerollt
- **ROI**: Break-Even nach 14 Monaten

## Technical Achievements

- **< 200ms API Latency**: Selbst für APAC-Supplier dank CDN + HANA Cloud
- **99.95% Uptime**: Keine ungeplanten Ausfälle in 18 Monaten Produktivbetrieb
- **Auto-Scaling**: Automatische Skalierung von 2 → 8 Instanzen bei Lastspitzen
- **Zero Modifications**: Kein einziger Custom-Code im S/4HANA Core

## Quantifiable Impact

| Metric              | Before | After   | Improvement     |
| ------------------- | ------ | ------- | --------------- |
| Manual Data Entry   | 40%    | 5%      | 87.5% reduction |
| Processing Time     | 3 days | 4 hours | 94% faster      |
| Support FTE         | 15     | 9       | 40% savings     |
| API Latency (APAC)  | 800ms  | <200ms  | 75% faster      |
| System Availability | 99.2%  | 99.95%  | 0.75pp increase |
| Supplier NPS        | 32     | 68      | +36 points      |

## Architectural Benefits

### Clean Core Compliance

- **Zero Modifications** im S/4HANA System
- **Released APIs Only**: Ausschließlich Nutzung freigegebener BAPIs und CDS Views
- **Independent Lifecycle**: Portal-Updates ohne S/4HANA Downtime
- **Cloud-Ready**: Vorbereitung für zukünftigen S/4HANA Cloud Transition

### Scalability & Performance

- **Independent Scaling**: Portal skaliert unabhängig vom ERP
- **Database Offloading**: Supplier-Queries belasten nicht mehr S/4HANA-Datenbank
- **Event-Driven Sync**: Asynchrone Master-Data-Replikation via Event Mesh

### User Experience

- **Mobile-First**: 60% der Supplier nutzen Portal via Smartphone
- **Self-Service**: 80% Reduktion bei Supplier-Support-Tickets
- **Real-Time**: Live-Status von Bestellungen ohne Backend-Overhead

## Key Learnings

### Clean Core ist Business-Case

Die Investition in Side-by-Side statt Gateway-Erweiterung zahlt sich aus: Wartungskosten -50%, Update-Fähigkeit erhalten, Cloud Transition vorbereitet.

### CQRS für Performance

Trennung von Read/Write-Operationen war kritisch: Heavy Fiori List Reports dürfen nicht Write-Performance beeinträchtigen.

### Change Management unterschätzt

Technische Lösung war in 4 Monaten fertig, Supplier-Onboarding (Training, Communication) dauerte weitere 6 Monate.

---

_Diese Case Study zeigt, wie Side-by-Side Extensions auf SAP BTP echten Business Value liefern: 40% TCO-Reduktion, verdoppelte User-Zufriedenheit und Cloud-Ready Architecture für die Zukunft._
