@import 'tailwindcss';
@plugin '@tailwindcss/typography';

@theme {
  --font-sans: var(--font-inter);

  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);
}

:root {
  /* Light Theme - Modern Blue/Indigo */
  --background: #f7f8fa;
  --foreground: #0b1220;

  --card: #ffffff;
  --card-foreground: #0b1220;

  --popover: #ffffff;
  --popover-foreground: #0b1220;

  --primary: #1e63ff;
  /* Blue Accent */
  --primary-foreground: #ffffff;

  --secondary: #e6e8ee;
  /* Cool Gray Border */
  --secondary-foreground: #0b1220;

  --muted: #f7f8fa;
  --muted-foreground: #5b6474;

  --accent: #e1e6f0;
  /* Light Blue Tint for hover */
  --accent-foreground: #1e63ff;

  --destructive: #ef4444;
  --destructive-foreground: #ffffff;

  --border: #e6e8ee;
  --input: #e6e8ee;
  --ring: #1e63ff;

  --radius: 0.75rem;

  /* Gradient Backgrounds */
  --gradient-start: #e6e8ee;
  --gradient-end: #d1d5db;
}

.dark {
  /* Dark Theme - Deep & Indigo */
  --background: #0b1020;
  --foreground: #eaf0ff;

  --card: #0f1730;
  --card-foreground: #eaf0ff;

  --popover: #0f1730;
  --popover-foreground: #eaf0ff;

  --primary: #4c7dff;
  /* Bright Indigo Accent */
  --primary-foreground: #ffffff;

  --secondary: #22304e;
  --secondary-foreground: #eaf0ff;

  --muted: #0b1020;
  --muted-foreground: #a7b0c2;

  --accent: #22304e;
  --accent-foreground: #4c7dff;

  --destructive: #f87171;
  --destructive-foreground: #ffffff;

  --border: #22304e;
  --input: #22304e;
  --ring: #4c7dff;

  --gradient-start: #1a2340;
  --gradient-end: #0f1730;
}

@layer utilities {
  .glass {
    @apply border border-white/20 shadow-xl backdrop-blur-xl dark:border-white/5;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.1) 100%);
  }

  .dark .glass {
    background: linear-gradient(135deg, rgba(30, 41, 59, 0.6) 0%, rgba(15, 23, 42, 0.2) 100%);
  }

  .glass-card {
    @apply border border-white/30 shadow-lg backdrop-blur-md transition-all duration-300 hover:shadow-xl dark:border-white/10;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.2) 100%);
  }

  .dark .glass-card {
    background: linear-gradient(135deg, rgba(30, 41, 59, 0.4) 0%, rgba(30, 41, 59, 0.1) 100%);
  }
}

body {
  background-attachment: fixed;
  background-image:
    radial-gradient(circle at 15% 50%, var(--gradient-start), transparent 25%),
    radial-gradient(circle at 85% 30%, var(--gradient-end), transparent 25%);
  background-color: var(--background);
  min-height: 100vh;
  font-feature-settings:
    'rlig' 1,
    'calt' 1;
}

/* Custom Scrollbar for "Nordic clean" feel */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--border);
  border-radius: 9999px;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--muted-foreground);
}

/* Syntax Highlighting - Multiple Themes Support */
code[data-theme*=' '],
code[data-theme*=' '] span {
  color: var(--shiki-light);
  background-color: var(--shiki-light-bg);
}

@media (prefers-color-scheme: dark) {
  code[data-theme*=' '],
  code[data-theme*=' '] span {
    color: var(--shiki-dark);
    background-color: var(--shiki-dark-bg);
  }
}

/* Support for next-themes with class strategy */
.dark code[data-theme*=' '],
.dark code[data-theme*=' '] span {
  color: var(--shiki-dark);
  background-color: var(--shiki-dark-bg);
}

/* Code Block Styling */
pre {
  @apply border-border bg-card overflow-x-auto rounded-lg border p-4;
  scrollbar-width: thin;
  scrollbar-color: var(--border) transparent;
}

pre code {
  @apply text-sm leading-relaxed;
  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
  display: block;
}

/* Inline Code */
:not(pre) > code {
  @apply bg-secondary/60 text-foreground border-border rounded border px-1.5 py-0.5 text-sm;
  font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
}

/* Line Styling */
code[data-line-numbers] {
  counter-reset: line;
}

code[data-line-numbers] > [data-line]::before {
  counter-increment: line;
  content: counter(line);
  @apply text-muted-foreground mr-4 inline-block w-4 text-right;
}

code[data-line-numbers-max-digits='2'] > [data-line]::before {
  width: 1.25rem;
}

code[data-line-numbers-max-digits='3'] > [data-line]::before {
  width: 1.75rem;
}

/* Highlighted Lines */
[data-highlighted-line] {
  @apply bg-accent/20 border-primary border-l-2 px-4;
}

/* Highlighted Chars */
[data-highlighted-chars] {
  @apply bg-primary/20 border-primary border-b-2;
  box-shadow: 0 0 0 4px rgb(var(--primary) / 0.1);
}

/* Code Title */
[data-rehype-pretty-code-title] {
  @apply bg-muted text-foreground border-border rounded-t-lg border border-b-0 px-4 py-2 text-sm font-medium;
}

[data-rehype-pretty-code-title] + pre {
  @apply mt-0 rounded-t-none;
}

/* Code Caption */
[data-rehype-pretty-code-caption] {
  @apply bg-muted text-muted-foreground border-border rounded-b-lg border border-t-0 px-4 py-2 text-xs;
}

pre:has(+ [data-rehype-pretty-code-caption]) {
  @apply mb-0 rounded-b-none;
}
